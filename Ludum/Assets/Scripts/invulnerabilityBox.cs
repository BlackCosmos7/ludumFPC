using UnityEngine;

public class FallinginvincibilityBox : MonoBehaviour
{
    public float lifespan = 5f; // Время жизни коробки
    public float invincibilityDuration = 5f; // Длительность неуязвимости

    private void Start()
    {
        // Уничтожаем коробку через заданное время
        Destroy(gameObject, lifespan);
    }

    private void OnMouseDown() // Вызывается при клике на коробку
    {
        DestroyBox(); // Уничтожаем коробку
    }

    private void DestroyBox()
    {
        // Находим объект игрока и активируем неуязвимость
        PlayerInvincibility playerInvincibility = FindObjectOfType<PlayerInvincibility>();
        if (playerInvincibility != null)
        {
            playerInvincibility.ActivateInvincibility(invincibilityDuration); // Активируем неуязвимость
        }

        // Здесь можно добавить эффекты разрушения, например, звук или анимацию
        Debug.Log("Box destroyed, activating invincibility for player.");
        Destroy(gameObject); // Уничтожаем коробку
    }
}
